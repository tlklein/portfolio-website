name: Code Validation Checks (Main Pipeline)

on:
  push:
    branches: [main, dev, feature]
  pull_request:
    branches: [main, dev, feature]
  schedule:
    - cron: '0 0 1 * *'

permissions:
  contents: read
  security-events: write

jobs:
  verify-signatures:
    uses: ./.github/workflows/code-signature-check.yml

  codeql:
    uses: ./.github/workflows/codeql-analysis.yml
    needs: verify-signatures

  site-validation:
    uses: ./.github/workflows/site-validation.yml
    needs: verify-signatures

  playwright-tests:
    uses: ./.github/workflows/playwright-tests.yml
    needs: site-validation

  sbom-scan:
    uses: ./.github/workflows/sbom-vulnerability-scan.yml
    needs: verify-signatures
