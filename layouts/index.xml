<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0"
     xmlns:atom="http://www.w3.org/2005/Atom"
     xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>{{ .Site.Title | html }}</title>
    <link>{{ .Site.BaseURL }}</link>
    <description>{{ with .Site.Params.description }}{{ . | html }}{{ else }}{{ .Site.Title | html }}{{ end }}</description>
    <generator>Hugo</generator>
    <language>{{ with .Site.LanguageCode }}{{ . }}{{ else }}en-us{{ end }}</language>
    <lastBuildDate>{{ now.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}</lastBuildDate>
    <atom:link href="{{ absURL "index.xml" }}" rel="self" type="application/rss+xml"/>
    {{ $pages := where .Site.RegularPages "Draft" "ne" true }}
    {{ $pages = where $pages "Future" "ne" true }}
    {{ $pages = sort $pages "Date" "desc" }}
    {{ range first 20 $pages }}
    <item>
      <title>{{ .Title | html }}</title>
      <link>{{ .Permalink }}</link>
      <guid isPermaLink="true">{{ .Permalink }}</guid>
      <pubDate>{{ .Date.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}</pubDate>

      {{ with .Params.description }}
      <description>{{ . | html }}</description>
      {{ else }}
      <description>{{ .Summary | html }}</description>
      {{ end }}
      {{/* content:encoded preserves HTML using CDATA */}}
      <content:encoded><![CDATA[{{ .Content | safeHTML }}]]></content:encoded>
      {{/* optional: categories from front matter */}}
      {{ with .Params.tags }}
        {{ range . }}
          <category>{{ . | html }}</category>
        {{ end }}
      {{ end }}
    </item>
    {{ end }}
  </channel>
</rss>